# 記事を書く目的

情報をインプットしてアウトプットする練習のため、毎週本を読み理解したことや気になったことをまとめてみようと思い、投稿します。

:::note warn
以下記載する内容は個人の見解であり、内容が正しいかどうかは保証できないことをご理解ください。
:::

# はじめに

読み進める中で面白かったところや気になった箇所を抜き出して、説明したいと思います。

# 目次

1. 前提
   1. コードそのものが設計書
   1. 読みやすいコードを書く
1. 原則
   1. PIE の原則
   1. SLAP の原則
   1. Naming is Important
1. 思想
   1. プログラミングセオリーを実現する６つの原則
   1. アーキテクチャ根底技法
1. 手法
   1. 曳光弾
   1. 契約による設計
   1. 防御的プログラミング

# 内容

## 前提

### コードそのものが設計書

ハードウェアとソフトウェアはそのエンジニアリングのプロセスにおいて対比される。

ハードウェアでは、「設計」を行い設計図をアウトプットする。そして、設計図をインプットとして物理的に製造する。

一方ソフトウェアでは、基本設計〜詳細設計〜プログラミング〜テストまでが設計で、コードをアウトプットする。そして、そのコードをインプットとしてコンパイラやビルドシステムが行うリリースビルドが製造を行う。

従って、ソフトウェアエンジニアリングにおいてはコードそのものが設計書なのである。

### 読みやすいコードを書く

コードは一度書いて終わりということはない。
機能改善、障害対応..etc などによって、必ず修正されるものである。

故に、プログラミングにおける一つ一つの判断は、「そのコードが変更される」という前提で行う必要がある。
言い換えると、「変更に強いコードを書く」ということである。

そして、そのためにも「コードが読みやすい」ということが何よりも重要である。

## 原則

### PIE の原則

PIE(Programming Intently and Expressively)とは、
「コードの意図を表現してプログラミングせよ」、
ということである。

コードを書くうえ、意図を明確に表現することが重要である。
なぜなら、コードは「コンパイラ」ではなく「人」が読むためのものであるからである。

コードを書く時間よりも、読んでいる時間の方が圧倒的に多い。
故に、「書きやすさ」よりも「読みやすさ」を重視するべきである。

### SLAP の原則

SLAP（Single Level Of Abstraction）とは、
抽象レベルを統一せよ、
ということである。

関数を実装する際、処理の中身を抽象度に合わせて分割し、抽象度のレベルを統一して実装せよ
ということである。

なぜ、抽象度を統一することが重要なのか。

それは、コードがレベルが揃った関数に分割されていると、

関数の一覧が目次のような役割を果たす「要約性」と
小さく分割された関数は「閲覧性」

をもたらすからである。

この二つの要素があると、コードの可読性は高くなるのだ。

### Naming is Important

コードで命名は、最重要課題である。
以下 2 つの要素が重要どちらもである。

「名前をつける行為」
適切な名前をつけれるということは、その要素が正しく理解されて、正しく設計されていることと同義である。

「名前そのもの」
名前は、コードを通じて、プログラマ同士がコミュニケーションをするための最大の場となる。

それでは、どのように命名すれば良いのか？
以下の質問を自分のした命名にぶつけてみると良い。

- 誤解されるような命名になっていないか。
- 「効果」と「目的」について説明されているか。

## 思想

### プログラミングセオリーを実現する６つの原則

以下、6 つの原則の名前を言及するにとどめる。

- 結果の局所化
- 繰り返しの最小化
- ロジックとデータの一体化
- 対称性
- 宣言型の表現
- 変更頻度

### アーキテクチャ根底技法

以下、１０個の技法の名前を言及するにとどめる。

- 抽象
- カプセル化
- 情報隠蔽
- パッケージ化
- 関心の分離
- 充足性、完全性、プリミティブ性
- ポリシーと実装の分離
- インターフェースと実装の分離
- 参照の一点性
- 分割統治

## 手法

### 曳光弾

曳光弾とは、発光することで、飛んだ軌跡がわかるようになっている弾丸のことで、

ソフトウェアの世界では、
優先的に検証したい部分を先行的にプログラミングをすることである。

どうして、曳光弾の考えが重要か。
即座にユーザーからのフィードバックをもらうことができるからである。

その際、余計な部分を削ぎ落として、最低限動作する土台をいち早く作ることが重要である。

### 契約による設計

契約による設計（Design By Contract）とは、
「呼び出し側」と「呼び出される側」の取り決めである。

関数は何かしらの作業を行うもので、その何かしらの作業を行う際に、その世界の状態について「想定」をおき、
その想定の中で、関数の終了後に何かしらの作業結果として、確約をします。

契約による設計（Design By Contract）では、
呼び出し側は、契約に従い呼び出す関数の前提を守る必要があります。
正しい引数を渡すのは、呼び出す側の責務とする考え方です。

なぜ、契約による設計が重要か。

それは、「思い違いを早期発見」できるから。

では、どのようにすればよいか。

コメントとアサーションを利用することで実現できる。
引数と、処理結果を assert することで契約が守られているかを確認します。

その際、以下に注意してください。

- 関数側で引数の調整を行わない。
- 関数側のアサーションを入力チェックなどの外部入力値のチェックに使用しないこと。

#### 防御的プログラミング

「こうなるはずだ」と決めつけないで、プログラミングをする。
具体的には以下のような観点のことである。

外部ソースのデータの入力の値を確認する。（想定内のエラー）
ファイル、ユーザーインターフェース、ネットワークなどからデータを取得する場合に、データが有効な範囲に収まっているかなどをチェックする。

→ エラー処理を行う。

関数の入力引数の値を確認する。（想定外のエラー）
別の関数から渡された、関数の入力引数を確認します。
外部ソースから渡された場合と異なり、無効な入力を検出するということは、コードのバグである。ということです。

→ アサーションを適用する。

# 来週読む予定の本

[プログラムはなぜ動くのか](https://www.amazon.co.jp/s/?ie=UTF8&keywords=%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0+%E3%81%AF+%E3%81%AA%E3%81%9C+%E5%8B%95%E3%81%8F+%E3%81%AE%E3%81%8B&index=aps&jp-ad-ap=0&tag=googhydr-22&ref=pd_sl_8q4a80jdp7_e&adgrpid=117115088079&hvpone=&hvptwo=&hvadid=618605094207&hvpos=&hvnetw=g&hvrand=15145798729910220641&hvqmt=e&hvdev=c&hvdvcmdl=&hvlocint=&hvlocphy=1028851&hvtargid=kwd-1213108547436&hydadcr=25441_13559138)

おしまい。
（2 週間サボってしまった。。）
